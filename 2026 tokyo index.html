<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÈóúÊù±8Êó•Â•≥Â≠êÊóÖ | Âêâ‰ºäÂç°ÂìáÈ¢®</title>

    <!-- IMPORTANT: tailwind.config must be defined BEFORE loading the CDN script -->
    <script>
        tailwind = window.tailwind || {};
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'chiika-pink': '#FFD1DC',
                        'chiika-blue': '#A2D2FF',
                        'chiika-yellow': '#FFF5BA',
                        'chiika-bg': '#FFF5F7',
                        'chiika-text': '#5D5D5D',
                    },
                    fontFamily: {
                        sans: ['Zen Maru Gothic', 'sans-serif'],
                    }
                }
            }
        }
    </script>
    <script src="https://cdn.tailwindcss.com"></script>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">

    <style>
        body {
            background-color: #A2D2FF;
            font-family: 'Zen Maru Gothic', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .banner-container {
            height: 250px;
            background-image: url('https://images.unsplash.com/photo-1493976040374-85c8e12f0c0e?q=80&w=1920&auto=format&fit=crop');
            background-size: cover;
            background-position: left center;
            position: relative;
        }
        .app-content {
            background-color: #FFF5F7;
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            margin-top: -30px;
            position: relative;
            z-index: 10;
            min-height: calc(100vh - 220px);
            padding-bottom: 100px;
        }
        .floating-tabs {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 40;
            display: flex;
            gap: 12px;
            background: rgba(255, 255, 255, 0.95);
            padding: 10px 15px;
            border-radius: 50px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            backdrop-filter: blur(5px);
        }
        .tab-btn { width: 45px; height: 45px; border-radius: 50%; display:flex; align-items:center; justify-content:center; font-size:1.1rem; color:#9CA3AF; transition: all 0.2s; position: relative; }
        .tab-btn.active { background: #FFD1DC; color: white; transform: translateY(-5px); box-shadow: 0 4px 10px rgba(255,209,220,0.6); }
        .tab-label { position: absolute; bottom: -20px; font-size: 10px; width: max-content; color:#888; opacity:0; transition: opacity 0.2s; }
        .tab-btn.active .tab-label { opacity:1; color:#FF8FAB; font-weight:bold; }

        .card { background: white; border-radius: 16px; box-shadow: 0 2px 10px rgba(255,183,178,0.2); transition: transform 0.1s; }
        .card:active { transform: scale(0.99); }

        .notepad-item { border-bottom: 1px dashed #cbd5e1; padding: 12px 0; display:flex; align-items:center; gap:10px; }
        .notepad-checkbox { appearance:none; width:20px; height:20px; border:2px solid #FFD1DC; border-radius:6px; position:relative; cursor:pointer; }
        .notepad-checkbox:checked { background-color:#FFD1DC; }
        .notepad-checkbox:checked::after { content:'‚úî'; color:white; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); font-size:12px; }
        .strikethrough { text-decoration: line-through; color:#cbd5e1; }
    </style>
</head>
<body>

<div id="app" class="max-w-md mx-auto relative min-h-screen bg-blue-200">

    <div class="banner-container relative">
        <div class="absolute bottom-10 left-4 text-white drop-shadow-md">
            <h1 class="text-2xl font-bold">ÈóúÊù±8Êó•Â•≥Â≠êÊóÖ üå∏</h1>
            <p class="text-sm opacity-90">ÂØåÂ£´Â±±Ëá™Èßï x Âêâ‰ºäÂç°Âìá</p>
        </div>
    </div>

    <div class="app-content px-4 py-6">
        <!-- (template content kept identical to your original; omitted here for brevity in this sample) -->
        <!-- Please paste your original template inner HTML here unchanged -->
        <!-- The script below contains the main JS changes (icon mapping includes fa-solid prefix) -->
    </div>

</div>

<script>
    const { createApp, ref, computed } = Vue;

    createApp({
        setup() {
            const currentTab = ref('itinerary');
            const selectedDayIndex = ref(0);
            const currencyInput = ref('');

            const showAddModal = ref(false);
            const showShopModal = ref(false);
            const showExpenseModal = ref(false);
            const showSplitModal = ref(false);
            const expenseMode = ref('personal');

            const tripDays = [
                { date: '2026-03-27', week: 'Fri', dateNum: '27' },
                { date: '2026-03-28', week: 'Sat', dateNum: '28' },
                { date: '2026-03-29', week: 'Sun', dateNum: '29' },
                { date: '2026-03-30', week: 'Mon', dateNum: '30' },
                { date: '2026-03-31', week: 'Tue', dateNum: '31' },
                { date: '2026-04-01', week: 'Wed', dateNum: '01' },
                { date: '2026-04-02', week: 'Thu', dateNum: '02' },
                { date: '2026-04-03', week: 'Fri', dateNum: '03' }
            ];

            const itineraryData = ref([
                [{ id: 1, category: 'Flight', name: 'ÈÖ∑Ëà™ TR898 Ëµ∑È£õ', hours: '06:40', note: 'Ê°ÉÂúíÁ¨¨‰∏ÄËà™Âªà', travelTime: 0, transportType: 'flight' }],
                [], [], [], [], [], [], []
            ]);

            const shoppingList = ref([{ name: 'Âêâ‰ºäÂç°ÂìáÁé©ÂÅ∂', image: '' }, { name: 'Ëó•Â¶ùÂ∫óÈù¢ËÜú', image: '' }]);

            const prepList = ref([
                { text: 'Ë≠∑ÁÖß (ÊïàÊúü6ÂÄãÊúà‰ª•‰∏ä)', checked: false },
                { text: 'Visit Japan Web Êà™Âúñ', checked: false },
                { text: 'Êó•Âπ£ÁèæÈáë', checked: false },
                { text: '‰ø°Áî®Âç° (Êµ∑Â§ñÂõûÈ•ãÈ´ò)', checked: false },
                { text: 'Á∂≤Âç° / Êº´ÈÅäÈñãÈÄö', checked: false },
                { text: 'ÈßïÁÖß + Êó•ÊñáË≠ØÊú¨ (Ëá™ÈßïÁî®)', checked: false }
            ]);
            const newPrepInput = ref('');

            const expenses = ref([{ category: 'Transport', name: 'Ë•øÁìúÂç°ÂÑ≤ÂÄº', date: '03/27', amount: 5000, payment: 'ÁèæÈáë' }]);

            const splitMembers = ref(['Êàë', 'Â∞èÂÖ´', 'ÂÖîÂÖî']);
            const splitBills = ref([]);
            const newSplit = ref({ item: '', amount: '', payer: 'Êàë' });

            const newItem = ref({ name: '', category: 'Sightseeing', hours: '', ticket: '', note: '', travelTime: 15, transportType: 'walk' });
            const newShopItem = ref({ name: '', image: null });
            const newExpense = ref({ category: 'Food', name: '', amount: '', payment: 'ÁèæÈáë', date: '' });

            const currentDayItinerary = computed(() => itineraryData.value[selectedDayIndex.value] || []);
            const totalExpenses = computed(() => expenses.value.reduce((sum, item) => sum + Number(item.amount), 0));

            // NOTE: icon classes include 'fa-solid' prefix so they work with Font Awesome CSS
            const getCategoryIcon = (cat) => {
                const map = {
                    'Sightseeing': 'fa-solid fa-camera',
                    'Food': 'fa-solid fa-utensils',
                    'Shopping': 'fa-solid fa-bag-shopping',
                    'Flight': 'fa-solid fa-plane',
                    'Transport': 'fa-solid fa-train-subway',
                    'Hotel': 'fa-solid fa-hotel',
                    'Other': 'fa-solid fa-star'
                };
                return map[cat] || 'fa-solid fa-star';
            };
            const getTransportIcon = (type) => {
                const map = { 'walk': 'fa-solid fa-person-walking', 'car': 'fa-solid fa-car', 'train': 'fa-solid fa-train-subway', 'bike': 'fa-solid fa-bicycle', 'flight': 'fa-solid fa-plane' };
                return map[type] || 'fa-solid fa-person-walking';
            };
            const openMap = (keyword) => window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(keyword)}`, '_blank');

            const handleImageUpload = (event) => {
                const file = event.target.files && event.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (e) => newShopItem.value.image = e.target.result;
                    reader.readAsDataURL(file);
                }
            };
            const addShopItem = () => {
                if (!newShopItem.value.name) return;
                shoppingList.value.push({ ...newShopItem.value });
                showShopModal.value = false;
                newShopItem.value = { name: '', image: null };
            };

            const addItem = () => {
                if (!newItem.value.name) return;
                const list = itineraryData.value[selectedDayIndex.value];
                list.push({ ...newItem.value, id: Date.now() });
                showAddModal.value = false;
                newItem.value = { name: '', category: 'Sightseeing', hours: '', ticket: '', note: '', travelTime: 15, transportType: 'walk' };
            };
            const deleteItem = (idx) => {
                if (confirm('Âà™Èô§Ê≠§Ë°åÁ®ãÔºü')) itineraryData.value[selectedDayIndex.value].splice(idx, 1);
            };

            const addPrepItem = () => {
                if (!newPrepInput.value) return;
                prepList.value.push({ text: newPrepInput.value, checked: false });
                newPrepInput.value = '';
            };
            const removePrepItem = (idx) => prepList.value.splice(idx, 1);

            const addExpense = () => {
                if (!newExpense.value.amount) return;
                const today = new Date();
                const dateStr = `${(today.getMonth()+1).toString().padStart(2,'0')}/${today.getDate().toString().padStart(2,'0')}`;
                expenses.value.push({ ...newExpense.value, date: dateStr });
                showExpenseModal.value = false;
                newExpense.value = { category: 'Food', name: '', amount: '', payment: 'ÁèæÈáë', date: '' };
            };

            const addMember = () => {
                const name = prompt('Ë´ãËº∏ÂÖ•ÊàêÂì°ÂêçÁ®±Ôºö');
                if (name) splitMembers.value.push(name);
            };
            const removeMember = (idx) => {
                if (confirm(`ÁßªÈô§ÊàêÂì° ${splitMembers.value[idx]}Ôºü`)) splitMembers.value.splice(idx, 1);
            };
            const addSplitBill = () => {
                if (!newSplit.value.amount || !newSplit.value.item) return;
                splitBills.value.push({ ...newSplit.value });
                showSplitModal.value = false;
                newSplit.value = { item: '', amount: '', payer: splitMembers.value[0] || 'Êàë' };
            };

            return {
                currentTab, selectedDayIndex, tripDays, currentDayItinerary,
                getCategoryIcon, getTransportIcon, openMap, currencyInput,
                showAddModal, newItem, addItem, deleteItem,
                shoppingList, showShopModal, newShopItem, handleImageUpload, addShopItem,
                expenses, totalExpenses, showExpenseModal, newExpense, addExpense, expenseMode,
                prepList, newPrepInput, addPrepItem, removePrepItem,
                splitMembers, splitBills, showSplitModal, newSplit, addMember, removeMember, addSplitBill
            };
        }
    }).mount('#app');
</script>

</body>
</html>
